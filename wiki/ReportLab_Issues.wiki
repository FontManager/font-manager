#summary Possible issues users may encounter while generating font sample sheets

= Crashes within the !ReportLab Toolkit=
<p>
If you experience crashes while trying to generate a sample sheet using Font Manager, if the application stops for more than few seconds while processing fonts it probably crashed, in that case the last file shown in the statusbar:

Processing: somefile.ttf

somefile.ttf is usually the culprit. This is normally an indication that there is something wrong with the font, typically it's because expected fields are missing. !ReportLab sticks to the specifications and so understandably fonts which do not follow them can cause issues.
</p>
<br />
<p>
If you encounter these issues please help track down possible solutions and workarounds by:

a.) Starting the application from a terminal by running 'font-manager', without the quotes of course, and causing it to crash again 

b.) Compare the traceback printed in the terminal, if there is one, to ones shown here
</p>
<br />
{{{
Traceback (most recent call last):
  File "./main.py", line 275, in on_export
  File "/usr/share/font-manager/export.py", line 94, in __init__
    self.confirm_export()
  File "/usr/share/font-manager/export.py", line 132, in confirm_export
    self.process_export()
  File "/usr/share/font-manager/export.py", line 163, in process_export
    if not buildsample.basic():
  File "./sampler.py", line 122, in basic
  File "./sampler.py", line 186, in register_ttf
  File "/usr/lib/python2.6/dist-packages/reportlab/pdfbase/ttfonts.py", line 411, in __init__
    self.extractInfo(charInfo)
  File "/usr/lib/python2.6/dist-packages/reportlab/pdfbase/ttfonts.py", line 485, in extractInfo
    psName = names[6].replace(" ", "-")  #Dinu Gherman's fix for font names with spaces
AttributeError: 'NoneType' object has no attribute 'replace'
}}}
<br />
{{{
Traceback (most recent call last):
  File "./main.py", line 275, in on_export
  File "./export.py", line 94, in __init__
  File "./export.py", line 132, in confirm_export
  File "./export.py", line 163, in process_export
  File "/usr/share/font-manager/sampler.py", line 122, in basic
    name = self.register_ttf(fontfile, filename)
  File "/usr/share/font-manager/sampler.py", line 190, in register_ttf
    tt_file.makeSubset(range(128))
  File "/usr/lib/python2.6/dist-packages/reportlab/pdfbase/ttfonts.py", line 755, in makeSubset
    numberOfContours = self.read_short()
  File "/usr/lib/python2.6/dist-packages/reportlab/pdfbase/ttfonts.py", line 331, in read_short
    return unpack('>h',self._ttf_data[self._pos-2:self._pos])[0]
struct.error: unpack requires a string argument of length 2
}}}
<br />
<p>
If it matches either of those, then your crash is happening within python-reportlab, please save the following file <a href='http://font-manager.googlecode.com/svn/tags/ReportLab/ttfonts.py' target='_blank'>ttfonts.py</a>, and after making a copy of your current ttfonts.py replace it with the one you just downloaded and attempt to recreate the crash.
</p>
<br />
<p>

For Ubuntu users

{{{/usr/share/pyshared/reportlab/pdfbase/ttfonts.py}}}

For Fedora users

{{{/usr/lib/python2.6/site-packages/reportlab/pdfbase/ttfonts.py}}}
</p>
<br />
<p>
If you're not sure where that file is on your system you can use locate to find it, i.e.
{{{
su -
updatedb
locate ttfonts.py
}}}
</p>
<br />
<p>
If you no longer experience the crash, you're all set and thanks for your help. 

I've already reported these upstream. :-)
</p>
<br />
<p>
If you still experience issues or your traceback doesn't match either of those please file a bug against Font Manager, please be sure to include the traceback, and if possible include the font in question or a link to it. Thank you.
</p>
